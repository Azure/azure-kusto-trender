<!DOCTYPE html>
<html>
  <head>
    <title>Basic Charts</title>

    <!-- styles are only used for styling header and auth elements, where possible -->
    <link rel="stylesheet" type="text/css" href="../styles.css" />

    <!-- boilerplate headers are injected with head.js, grab them from the live example header, or include a link to head.js -->
    <script src="../boilerplate/head.js"></script>

    <!-- boilerplate auth code is injected with auth.js, check it out for auth setup -->
    <script src="../boilerplate/auth.js"></script>
  </head>
  <body style="font-family: 'Segoe UI', sans-serif">
    <div id="chart1" style="width: 100%; height: 600px; margin-top: 40px"></div>
    <div id="chart2" style="width: 50%; height: 400px; float: left"></div>
    <div id="chart3" style="width: 50%; height: 400px; float: right"></div>
    <div
      id="chart4"
      style="width: 100%; height: 600px; margin-top: 40px; float: left"
    ></div>
    <script>
      window.onload = async function () {
        var tsiClient = new TsiClient();

        initAuth("Basic Charts");

        const cluster = new ADX.ADXTrenderClient(
          authContext.getTsiToken,
          "trender"
        );

        const today = new Date();
        const aYearAgo = new Date(
          new Date().setFullYear(today.getFullYear() - 1)
        );
        const bucketSize = "1d";

        const result = await cluster.getAggregates(
          ["ROCK/15", "ROCK/110"],
          aYearAgo,
          today,
          bucketSize
        );

        var lineChart = new tsiClient.ux.LineChart(
          document.getElementById("chart1")
        );

        lineChart.render(result, {
          theme: "light",
          grid: true,
          tooltip: true,
        });

        var barChart = new tsiClient.ux.BarChart(
          document.getElementById("chart2")
        );
        barChart.render(result, {
          theme: "dark",
          grid: true,
          tooltip: true,
          legend: "compact",
        });

        var pieChart = new tsiClient.ux.PieChart(
          document.getElementById("chart3")
        );
        pieChart.render(result, {
          theme: "light",
          grid: true,
          tooltip: true,
          legend: "compact",
        });

        var heatmap = new tsiClient.ux.Heatmap(
          document.getElementById("chart4")
        );
        heatmap.render(result, {}, [
          {
            searchSpan: {
              from: aYearAgo,
              to: today,
              bucketSize,
            },
          },
        ]);
      };
    </script>
  </body>
</html>
